function initMap(){var e=new google.maps.StyledMapType([{stylers:[{hue:"#d5530f"},{visibility:"simplified"},{gamma:.5},{weight:.5}]},{elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"water",stylers:[{color:"#eeb577"}]}]),t="whisky-style",n=new google.maps.Map(document.getElementById("whisky-map"),{zoom:8,center:{lat:44.54,lng:-78.546},mapTypeControl:!1,streetViewControl:!1});n.mapTypes.set(t,e);n.setMapTypeId(t);xmlURL="xml/distilleries.xml";loadMarkers(n)}function loadMarkers(e){require(["downloadXML"],function(){e.markers=e.markers||[];downloadUrl(xmlURL,function(t){var n=xmlParse(t),r=n.documentElement.getElementsByTagName("marker");for(var i=0;i<r.length;i++){var s=r[i].getAttribute("name"),o=r[i].getAttribute("category"),u=r[i].getAttribute("id");switch(o){case"malt":var a="img/icons/malt.png";break;case"grain":var a="img/icons/grain.png";break;case"pot_still":var a="img/icons/pot_still.png";break;case"coffey_still":var a="img/icons/coffey_still.png"}var f={url:a,size:new google.maps.Size(30,30),origin:new google.maps.Point(0,0),scaledSize:new google.maps.Size(30,30)},l=new google.maps.LatLng(parseFloat(r[i].getAttribute("lat")),parseFloat(r[i].getAttribute("lng"))),c=new google.maps.Marker({map:e,position:l,icon:f,title:s});e.markers.push(c)}})})}function downloadUrl(e,t){var n=window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;n.onreadystatechange=function(){n.readyState==4&&t(n,n.status)};n.open("GET",e,!0);n.send(null)}$(document).ready(function(){console.log("START:main.js");require(["api"],function(){initMap()})});