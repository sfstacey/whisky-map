function initMap(){var e=new google.maps.StyledMapType([{stylers:[{hue:"#d5530f"},{visibility:"simplified"},{gamma:.5},{weight:.5}]},{elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"water",stylers:[{color:"#eeb577"}]}]),t="whisky-style",n=new google.maps.Map(document.getElementById("whisky-map"),{zoom:8,center:{lat:44.54,lng:-78.546},mapTypeControl:!1,streetViewControl:!1});n.mapTypes.set(t,e);n.setMapTypeId(t);var r="xml/distilleries.xml";loadMarkers(r,n)}function loadMarkers(e,t){var n=[];downloadUrl(e,function(e){var n=xml.documentElement.getElementsByTagName("marker");for(var r=0;r<n.length;r++){var i=n[r].getAtrribute("name"),s=n[r].getAttribute("markerimage"),o=n[r].getAttribute("id"),u=n[r].getAttribute("address1")+"<br />"+n[r].getAttribute("address2")+"<br />"+n[r].getAttribute("address3")+"<br />"+n[r].getAttribute("postcode"),a={url:s,size:new google.maps.Size(71,132),origin:new google.maps.Point(0,0),scaledSize:new google.maps.Size(71,132)},f=new google.maps.LatLng(parseFloat(n[r].getAttribute("lat")),parseFloat(n[r].getAttribute("lng"))),l="<div class='infowindow'><b>"+i+"</b> <br/>"+u+"<br/></div>",c=new google.maps.Marker({map:t,position:f,icon:a,title:i});t.markers.push(c);bindInfoWindow(c,t,infoWindow,l)}})}function downloadUrl(e,t){var n=window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;n.onreadystatechange=function(){n.readyState==4&&t(n,n.status)};n.open("GET",e,!0);n.send(null)}$(document).ready(function(){console.log("START:main.js");require(["api"],function(){initMap()})});